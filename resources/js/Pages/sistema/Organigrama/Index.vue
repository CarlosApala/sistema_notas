<template>
    <div class="p-6">
        <h1 class="text-2xl font-bold mb-4">Organigrama Institucional</h1>
        <div id="organigrama" class="organigrama-container"></div>
    </div>
</template>

<script setup>
import OrgChart from "@balkangraph/orgchart.js"
import { onMounted } from "vue"
import App from '@/Layouts/AppLayout.vue'

defineOptions({ layout: App })

onMounted(() => {
    const chart = new OrgChart(document.getElementById("organigrama"), {
        nodeBinding: {
            field_0: "name",
            field_1: "title"
        },
        nodes: [
            { id: 1, name: "Carlos", title: "Director General" },
            { id: 2, pid: 1, name: "Ana", title: "Subdirectora Ejecutiva" },
            { id: 11, stpid: 1, name: "Patricia", title: "Asistente Ejecutiva" },
            { id: 3, pid: 2, name: "Luis", title: "Gerente de Finanzas" },
            { id: 4, pid: 2, name: "Marta", title: "Gerente de Recursos Humanos" },
            { id: 5, pid: 3, name: "Pedro", title: "Analista Financiero" },
            { id: 6, pid: 4, name: "Luc√≠a", title: "Especialista en RRHH" },
            { id: 9, pid: 4, name: "Javier", title: "Coordinador de Capacitaci√≥n" },
            { id: 10, pid: 4, name: "Sof√≠a", title: "Jefa de Relaciones Laborales" },
            { id: 7, pid: 5, name: "Andr√©s", title: "Asistente Contable" },
            { id: 8, pid: 6, name: "Mar√≠a", title: "Pasante de RRHH" }
        ],

        enableZoom: false,         // ‚ùå Desactiva zoom
        scaleInitial: OrgChart.match.boundary, // üîÑ Escala autom√°ticamente para que quepa en pantalla
        layout: OrgChart.tree,     // Layout est√°ndar tipo √°rbol
        centerOnResize: true       // ‚úÖ Centra autom√°ticamente en cambios de tama√±o
    });
});

</script>

<style scoped>
.organigrama-container {
    width: 100%;
    height: 60vh;
    /* Ajusta si tu header/footer ocupan m√°s o menos espacio */
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: auto;
}
</style>
